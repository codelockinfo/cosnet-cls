{{ 'my-account.css' | asset_url | stylesheet_tag }}
<div class="customer-forgot" id="recover">
  <div class="container">
    <div
      class="flex gap-custom-big flex-cols flex-wrap"
      style="
        --col-gap-desktop: 60px;
        --col-gap: 40px;
        --col-desktop: 2;
        --col-number: 1;
      "
    >
      <div class="recover-form customer-form">
        <h3 class="title-customer mt-0">{{ 'customer.recover_password.title' | t }}</h3>
        <p class="subtext mb-20">
          {{ 'customer.recover_password.subtext' | t }}
        </p>
        {%- form 'recover_customer_password' -%}
          {%- assign recover_success = form.posted_successfully? -%}
          {%- if form.errors -%}
            {%- assign message = form.errors | default_errors | strip_html -%}
            <p class="error lh-normal flex gap-10">
              {%- render 'icon-error' -%}
              {{ message }}
            </p>
          {% endif %}
          <div class="form-field form-group  mb-15 flex flex-column">
            <label class="form-label mb-3 visually-hidden" for="RecoverEmail">
              {{ 'customer.recover_password.email' | t }}
              <span class="required">*</span>
            </label>
            <input
              type="email"
              value=""
              name="email"
              id="RecoverEmail"
              autocomplete="email"
              autocorrect="off"
              autocapitalize="off"
              placeholder="{{ 'customer.login_page.placeholder_email' | t }}"
              aria-required="true"
              aria-invalid="true"
              required
            >
          </div>
          <div class="form-actions mt-30">
            <input
              type="submit"
              class="btn-primary text-center w-full"
              value="{{ 'customer.recover_password.submit' | t }}"
            >
          </div>
        {%- endform -%}
      </div>
      <div class="content-register">
        <h3 class="title-customer mt-0">
          {{ 'customer.register.title_content' | t }}
        </h3>
        <p class="mb-30">
          {{ 'customer.register.content' | t }}
        </p>
        <a
          href="{{ routes.account_register_url }}"
          class="btn btn-primary block no-underline text-center"
        >
          {{- 'customer.register.submit' | t -}}
        </a>
      </div>
    </div>
  </div>
</div>
<div class="customer-login">
  <div class="container">
    <div
      class="flex gap-custom-big flex-cols flex-wrap"
      style="--col-gap-desktop: 60px; --col-gap: 40px; --col-desktop: 2; --col-number: 1;"
    >
      <div class="login-form customer-form">
        <h3 class="title-customer mt-0">
          {{ 'customer.login_page.title' | t }}
        </h3>
        {%- if recover_success == true -%}
          <p class="success flex gap-5">
            {%- render 'icon-success' -%}
            {{ 'customer.recover_password.success' | t }}
          </p>
        {% endif %}
        {%- form 'customer_login', class: 'customer-login-form' -%}
          {%- if form.errors -%}
            {%- assign message = form.errors.messages.form -%}
            <p class="error lh-normal flex gap-10">
              {%- render 'icon-error' -%}
              {{ message }}
            </p>
          {% endif %}
          <div class="form-group mb-15 flex flex-column form-field">
            <label class="form-label mb-3 visually-hidden" for="CustomerEmail">
              {{ 'customer.login_page.email' | t }}
              <span class="required">*</span>
            </label>
            <input
              type="email"
              name="customer[email]"
              id="CustomerEmail"
              placeholder="{{ 'customer.login_page.placeholder_email' | t }}"
              required
            >
          </div>
          {%- if form.password_needed -%}
            <div class="password-wrapper">
  <input
    type="password"
    name="customer[password]"
    id="CustomerPassword"
    placeholder="{{ 'customer.login_page.placeholder_pass' | t }}"
    required
  />
  <span class="toggle-password" data-target="CustomerPassword">üëÅ</span>
</div>
          {% endif %}
          <div class="form-actions mt-20">
            <a href="#recover" class="forget-password no-underline">
              <span class="text">{{ 'customer.login_page.forgot_password' | t }}</span>
            </a>
          <button
          type="submit"
          id="LoginSubmitBtn"
          class="btn-primary block no-underline mt-30 w-full"
        >
          <span class="btn-text">
            {{ 'customer.login_page.submit' | t }}
          </span>
        </button>
          </div>
        {%- endform -%}
      </div>
      <div class="content-register">
        <h3 class="title-customer mt-0">
          {{ 'customer.register.title_content' | t }}
        </h3>
        <p class="mb-30">
          {{ 'customer.register.content' | t }}
        </p>
        <a
          href="{{ routes.account_register_url }}"
          class="btn btn-primary inline-block no-underline text-center w-full"
        >
          {{- 'customer.register.submit' | t -}}
        </a>
      </div>
    </div>
  </div>
</div>
<style>
/* Loader */
.password-wrapper {
  position: relative;
  width: 100%;
}

.password-wrapper input {
  width: 100%;
  padding-right: 40px; /* icon ke liye jagah */
  border-radius: 30px; /* aapke design ke hisab se adjust karo */
  height: 50px; /* apne input ki height ke hisab se */
  box-sizing: border-box;
}

.toggle-password {
  position: absolute;
  top: 50%;
  right: 15px;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 18px;
  color: #333;
  user-select: none;
  z-index: 10;
}
#LoginSubmitBtn {
  position: relative;
}

.btn-loading .btn-text {
  visibility: hidden;
}

.btn-loading::after {
  content: "";
  width: 22px;
  height: 22px;
  border: 2px solid #fff;
  border-top-color: transparent;
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* Password toggle */
.password-wrapper {
  position: relative;
}

.password-wrapper input {
  padding-right: 45px;
}

.toggle-password {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  font-size: 16px;
}
</style>
<script>
document.addEventListener("DOMContentLoaded", function () {

  const openEye = `
  <svg width="14" height="12" viewBox="0 0 14 12" fill="none" class="icon-view">
    <path d="M0.0683594 5.90234C0.0683594 5.90234 0.123047 5.80208 0.232422 5.60156C0.341797 5.39193 0.501302 5.13672 0.710938 4.83594C0.847656 4.64453 0.998047 4.43945 1.16211 4.2207C1.33529 3.99284 1.52669 3.76497 1.73633 3.53711C2.00065 3.25456 2.29232 2.97201 2.61133 2.68945C2.93945 2.4069 3.29492 2.14714 3.67773 1.91016C4.14258 1.61849 4.65299 1.38151 5.20898 1.19922C5.76497 1.00781 6.36198 0.912109 7 0.912109C7.63802 0.912109 8.23503 1.00781 8.79102 1.19922C9.34701 1.38151 9.85742 1.61849 10.3223 1.91016C10.7051 2.14714 11.056 2.4069 11.375 2.68945C11.7031 2.97201 11.9993 3.25456 12.2637 3.53711C12.4733 3.76497 12.6602 3.99284 12.8242 4.2207C12.9974 4.43945 13.1523 4.64453 13.2891 4.83594C13.4987 5.13672 13.6582 5.39193 13.7676 5.60156C13.877 5.80208 13.9316 5.90234 13.9316 5.90234Z"
          fill="currentColor"/>
  </svg>
  `;

  const closeEye = `
  <svg width="14" height="15" fill="none" class="icon-hide">
    <path fill="currentColor" d="M.178 1.16A.535.535 0 0 1 0 .75C0 .586.06.45.178.34A.52.52 0 0 1 .574.162c.164 0 .306.06.424.178L6.18 5.52l2.447 2.447 5.182 5.182a.52.52 0 0 1 .178.396c0 .164-.06.306-.178.424a.557.557 0 0 1-.41.164.586.586 0 0 1-.41-.164l-2.598-2.611a6.558 6.558 0 0 1-1.668.765 5.939 5.939 0 0 1-1.722.26 5.76 5.76 0 0 1-1.805-.273 6.928 6.928 0 0 1-1.531-.711 8.42 8.42 0 0 1-1.067-.78c-.319-.282-.61-.565-.875-.847-.21-.228-.4-.451-.574-.67l-.451-.629c-.21-.31-.37-.565-.479-.766l-.164-.314a.553.553 0 0 1 0-.533c.347-.638.739-1.226 1.176-1.764.438-.547.912-1.04 1.422-1.477L.178 1.16Z"/>
  </svg>
  `;

  const form = document.querySelector(".customer-login-form");
  const submitBtn = document.getElementById("LoginSubmitBtn");

  if (form && submitBtn) {
    form.addEventListener("submit", function () {
      submitBtn.classList.add("btn-loading");
      submitBtn.disabled = true;
    });
  }

  document.querySelectorAll(".toggle-password").forEach(function (btn) {

    // Default icon
    btn.innerHTML = closeEye;

    btn.addEventListener("click", function () {
      const input = document.getElementById(btn.dataset.target);

      if (!input) return;

      if (input.type === "password") {
        input.type = "text";
        btn.innerHTML = openEye;
      } else {
        input.type = "password";
        btn.innerHTML = closeEye;
      }
    });
  });

});
</script>
